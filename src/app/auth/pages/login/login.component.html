<div class="login-wrapper">
  <div class="login-left">
    <div class="logo-container">
      <div class="logo-wrapper" (click)="goHome()">
        <img src="assets/icons/gaia.png" alt="Gaia Logo" class="gaia-logo"/>
        <div class="logo-glow"></div>
      </div>
      <div class="floating-elements">
        <ng-container *ngFor="let _ of floatElements; let idx = index">
          <div class="float-element" [ngClass]="'element-' + (idx + 1)"></div>
        </ng-container>
      </div>
    </div>
  </div>

  <div class="login-right">
    <div class="login-box">
      <h2>Iniciar Sesión</h2>

      <form [formGroup]="loginForm" (ngSubmit)="iniciarSesion()">
        <div class="form-group">
          <label for="cedula">Cédula</label>
          <input id="cedula" formControlName="cedula" type="text" placeholder="Ingrese su número de cédula" [disabled]="isLoading"/>
          <div class="error-message" *ngIf="getFieldError(loginForm, 'cedula')">
            {{ getFieldError(loginForm, 'cedula') }}
          </div>
        </div>

        <div class="form-group">
          <label for="contraseña">Contraseña</label>
          <input id="contraseña" formControlName="contraseña" type="password" placeholder="Ingrese su contraseña" [disabled]="isLoading"/>
          <div class="error-message" *ngIf="getFieldError(loginForm, 'contraseña')">
            {{ getFieldError(loginForm, 'contraseña') }}
          </div>
        </div>

        <div class="error-message" *ngIf="errorMessage">
          {{ errorMessage }}
        </div>

        <a class="forgot-password" (click)="openRecoverModal()">¿Olvidé mi contraseña?</a>

        <button type="submit" class="btn-login" [disabled]="isLoading">
          <span *ngIf="!isLoading">Continuar</span>
          <span *ngIf="isLoading">Iniciando sesión...</span>
        </button>
      </form>

      <p class="register-text">¿Aún no tienes un usuario?
        <a (click)="goRegister()">Crear una cuenta</a>
      </p>
    </div>
  </div>
</div>

<!-- Modal de Recuperar Contraseña -->
<div class="modal-overlay" *ngIf="showRecoverModal" (click)="closeRecoverModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Recuperar mi contraseña</h3>
      <button class="modal-close" (click)="closeRecoverModal()">×</button>
    </div>
    
    <div class="modal-body">
      <p>Escriba su dirección de correo electrónico de registro para recibir instrucciones de restablecimiento de contraseña. Para ayuda escríbenos a ayuda&#64;soporteacc.com</p>
      
      <form [formGroup]="recoverForm" (ngSubmit)="sendRecoverEmail()">
        <div class="form-group">
          <label for="email">Su correo asignado</label>
          <input id="email" formControlName="email" type="email" placeholder="Ingrese su correo electrónico" class="modal-input" [disabled]="isRecoverLoading"/>
          <div class="error-message" *ngIf="getFieldError(recoverForm, 'email')">
            {{ getFieldError(recoverForm, 'email') }}
          </div>
        </div>
      </form>

      <!-- Mensajes de éxito y error -->
      <div class="success-message" *ngIf="recoverMessage">
        {{ recoverMessage }}
      </div>
      
      <div class="error-message" *ngIf="recoverError">
        {{ recoverError }}
      </div>
    </div>
    
    <div class="modal-footer">
      <button type="button" class="btn-modal-send" (click)="sendRecoverEmail()" [disabled]="isRecoverLoading">
        <span *ngIf="!isRecoverLoading">Enviar credenciales</span>
        <span *ngIf="isRecoverLoading">Enviando...</span>
      </button>
    </div>
  </div>
</div>
